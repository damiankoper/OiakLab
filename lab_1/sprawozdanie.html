<!DOCTYPE html>
    <html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <title>Blah blah</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
        <link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        
        <script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
    </head>
    <body>
        <h1 id="blah-blah">Blah blah</h1>
<h2 id="kompilacja-i-linkowanie">Kompilacja i linkowanie</h2>
<p>Polecenie <code>as hello.s -o hello.o -g</code> służy do kompilacji programu.</p>
<p>Polecenie <code>ld hello.s -o hello</code> służy do przeprowadzenia procesu linkowania.</p>
<p>Połączenie tych funkcji można uzyskać poprzez użycie kompilatora gcc:</p>
<pre><code><div>gcc -g -o hello hello.s
</div></code></pre>
<h2 id="u%C5%BCycie-narz%C4%99dzia-gdb">Użycie narzędzia GDB</h2>
<p>Uruchomienie programu <code>hello</code> za pomocą debuggera GDB:</p>
<pre><code><div>gdb -q hello
</div></code></pre>
<p>Po wyświetlaniu zachęty terminala <code>(gdb)</code>, komendą <code>r</code> (run) uruchamiamy program. Uruchomienie GDB i samego programu daje odpowiedź:</p>
<pre><code><div>Reading symbols from ./hello...done.
(gdb) r
Starting program: /home/damian_koper/Documents/GitHub/OiakLab/lab_1/hello 
Hello World!
[Inferior 1 (process 7498) exited normally]
</div></code></pre>
<p>W celu zatrzymania i podejrzenia stanu wykonywania programy w jego trakcie możemy ustawić breakpoint (pułapkę) komendą :</p>
<pre><code><div>b[reak] wskaźnik|nr linii
</div></code></pre>
<p>Następnie po ścieżce wykonywania programu możemy poruszać się używając koment takich jak <code>step</code>, <code>stepi</code>, <code>continue</code> itp.
Niżej przedstawiono proces zatrzymania programu <code>hello</code>:</p>
<pre><code><div>Reading symbols from ./hello...done.
(gdb) b 12
Breakpoint 1 at 0x8048074: file hello.s, line 12.
(gdb) b 18
Breakpoint 2 at 0x804808a: file hello.s, line 18.
(gdb) r
Starting program: /home/damian_koper/Documents/GitHub/OiakLab/lab_1/hello 

Breakpoint 1, _start () at hello.s:12
12        mov $WRITE, %eax 
(gdb) step
13        mov $STDOUT, %ebx
(gdb) continue
Continuing.
Hello World!

Breakpoint 2, _start () at hello.s:18
18        mov $EXIT, %eax
(gdb) continue
Continuing.
[Inferior 1 (process 8487) exited normally]
</div></code></pre>
<p>Ustawiono tu dwa breakpointy w liniach 12 i 13. Program odpowiednio zatrzymał się przed i po wypisaniu tekstu na ekran. Wykonywanie wznowiono poleceniem <code>continue</code>.</p>
<h3 id="komenda-x">Komenda <code>x</code></h3>
<p>Komenda <code>x</code> wyświetla zawartość pamięci odpowiednio ją formatując. Dokumentacja specyfikuje jej użycie następująco:</p>
<pre><code><div>(gdb) x [Address expression]
(gdb) x /[Format] [Address expression]
(gdb) x /[Length][Format] [Address expression]
</div></code></pre>
<p>Przykład użycia dla programu <code>hello</code> przed wyświetleniem tekstu (13c oznacza wyświetlenie 13 kolejnych wartości sformatywanych jako <code>char</code>):</p>
<pre><code><div>(gdb) x/13c &amp;hello
0x8049096:      72 'H'  101 'e' 108 'l' 108 'l' 111 'o' 32 ' '  87 'W'  111 'o'
0x804909e:      114 'r' 108 'l' 100 'd' 33 '!'  10 '\n'
</div></code></pre>
<h3 id="disassemble">Disassemble</h3>
<p>Polecenie disassemble wyświetla treść skompilowanego programu w postaci adresów, mnemoników. W tym przypadku strzałką zaznaczone jest polecenie, na którym przerwano wykonywanie programu:</p>
<pre><code><div>(gdb) disassemble
Dump of assembler code for function _start:
   0x08048074 &lt;+0&gt;:     mov    $0x4,%eax
   0x08048079 &lt;+5&gt;:     mov    $0x1,%ebx
   0x0804807e &lt;+10&gt;:    mov    $0x8049096,%ecx
   0x08048083 &lt;+15&gt;:    mov    $0xd,%edx
   0x08048088 &lt;+20&gt;:    int    $0x80
=&gt; 0x0804808a &lt;+22&gt;:    mov    $0x1,%eax
   0x0804808f &lt;+27&gt;:    mov    $0x0,%ebx
   0x08048094 &lt;+32&gt;:    int    $0x80
End of assembler dump.
</div></code></pre>

    </body>
    </html>